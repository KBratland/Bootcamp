<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script>
//create the receipt to work with and one to print out
var table_receipt ={};
var print_receipt = [];
var patrons = parseFloat(prompt("Please tell us how many people were dining:"));
console.log(typeof(patrons))

function input_receipt() {

    var item_name = prompt("Enter an item from your receipt: ").toLowerCase();

    var item_cost = prompt("How much was the item?");

    table_receipt[item_name] = parseFloat(item_cost);
    print_receipt.push(" " + item_name, " " + item_cost);
    finished_items();

    function total_bill() {
        var table_bill = 0;
        for (var price in table_receipt) {
            table_bill += (table_receipt[price]);
        }
        alert("The table's total bill is " + table_bill);
        console.log(typeof(table_bill));
        return table_bill;
    }

    function tip() {
        var tip_total = prompt("How was your service? Good = 15, great = 20, or excellent = 25%? ");
            parseFloat(tip_total);{
            console.log(typeof(tip_total/100));
            var percent = (tip_total / 100);
            }
        //if else to change tip multiplier based on party size. More than 6 people requires a greater tip.//
        if (patrons < 6) {
            alert("Your individual tip is $" + (total_bill() * percent) +
                    " and per person gratuity is $" + ((total_bill() * percent) / patrons));
        }

        //Because tip must be at least 18% the 15% choice doesn't apply and user must choose a higher one.//
        else {
            if(tip === .15) {
                alert("Hey cheapskates, the minimum is 18%! Press return to choose a more suitable amount. ");
                var larger_tip = prompt("Would you like to do 18, 20 or 25%? ");
                parseInt(larger_tip);
                larger_tip = larger_tip / 100;
                alert("Your individual tip is $" + total_bill * larger_tip  +
                        " and per person gratuity is $" + (total_bill * larger_tip) / patrons);
            }
            else {
                alert("Hey big tipper, your gratuity is $" + total_bill * percent +
                        " and per person gratuity is $" + (total_bill * percent) / patrons);
            }
        }
    }

    function finished_items() {

        var finished = prompt("Do you have another item? Yes or No").toLowerCase();

        if (finished === "yes") {
            input_receipt();
        }

        else if (finished === "no") {
            alert("Your receipt includes the following items and costs " + print_receipt);
            total_bill();
            tip();

            //add here split or itemize, total table and divide by patrons or create constructor for people to itemize
        }

        else {
            alert("We are not sure what you typed, please try again");
            finished_items();
        }
    }
}
input_receipt()





//function who_ate_what() {
</script>
</body>
</html>